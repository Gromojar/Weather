<!DOCTYPE html>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
<link rel="stylesheet" href="styles.css">
<script>

window.onload = show;
var temp;
var cloud;
var cloud_description;
var mydata;
var mydata2;
var gif;
var gifurl;
var requesturl;
var request = new XMLHttpRequest()
//var request2 = new XMLHttpRequest();

request.open('GET', 'https://api.openweathermap.org/data/2.5/weather?q=London,uk&units=metric&mode=json&APPID=606103aa99b1bf025d1b02ff40ca516e', true)
//request2.open('GET', 'https://api.giphy.com/v1/gifs/search?api_key=A1RvKIagTgv0e02pLft03AxVIcDE5H8S&q=Cloudy', true);
request.onload = function () {

}
request.send();
//request2.send();

function show()
  {
document.getElementById("cont2").innerHTML = "<br>"
document.getElementById("cont").innerHTML = "<br>"
mydata = JSON.parse(request.response);


    temp = mydata.main.temp;
    cloud = mydata.weather[0].main;
    cloud_description = mydata.weather[0].description;
    gifurl = "https://api.giphy.com/v1/gifs/search?api_key=A1RvKIagTgv0e02pLft03AxVIcDE5H8S&q=" + cloud_description;
    //request2.open('GET', gifurl, true);
   // request2.onload = function () {

//request2.send();
    console.log(temp);
    console.log(cloud);
    console.log(cloud_description);

    //console.log(mydata.main.temp);
    gif = Math.floor((0 - -20) * Math.random());


    document.getElementById("cont").innerHTML = "In Kraków there are " + temp + "°C." + "<br><br>" + "I can see " + cloud_description;
      var imgsunny = "'images/Hot.png'";
      var imgsunnycloudy = "'images/Hotwithclouds.png'";
fetch(gifurl)
	.then(function (response) {
		// Get a JSON object from the response
		// This is a weird quirk of Fetch
		return response.json();
	}).then(function (data) {
		// Log the data to the console
		// You would do something with the /posts data here
 		console.log(data);
	        mydata2 = data;
	urlgif = "<br><br><video width='640' height='480' autoplay loop>" + "<source src='" + mydata2.data[gif].images.looping.mp4 + "'type='video/mp4'>"
      document.getElementById("cont2").innerHTML += urlgif;
	}).catch(function (error) {
		// if there's an error, log it
		console.log(error);
	});

//mydata2 = JSON.parse(request2.response);
      //document.getElementById("cont").innerHTML += "<br><br> So hot outside!";
      //document.getElementById("cont").innerHTML += "<img class='align-self-center mr-3' src=" + imgsunny + ">";

}
show();
</script>
<html>
<head>
<title>Weather App</title>
</head> 
<body>
<body onload="show()">
<body onload="show()">
<body onload="show()">
<div class="container rounded-pill">
<center>
<div id="cont" class="p-3 mb-2 bg-info text-white">
  </div>
<div id="cont2" class="p-3 mb-2 bg-info text-white">
	
	</div>

<button type="button" class="btn btn-info" onclick="show()">Check again</button>
	</center>
</body>
</html>
